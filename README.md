# Домашнее задание к занятию "Базы данных, их типы" - `Вялов владислав`


### Задание 1

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.
Ответ:

Рекомендуемый тип: Реляционная (SQL) СУБД, например Oracle 
Жёсткая схема данных обеспечивает чёткую структуру таблицы проекты, статьи бюджета, план, факт, связаны внешними ключами.
Поддержка ACID гарантирует, что финансовые расчёты не будут нарушены при одновременных операциях.
Удобно строить сложные аналитические отчёты с помощью SQL-запросов и оконных функций.

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.
Ответ:

Для лендингов Рекомендуемый тип: Документная NoSQL СУБД. 
Лендинг может иметь уникальную форму с разными полями . Документная БД позволит хранить данные каждого лида как отдельный документ (JSON) без изменения общей структуры БД.
Ключ-значение БД обеспечит сверхбыстрое сохранение данных от форм, чтобы не потерять ни одного лида при высокой нагрузке.

Для CRM Рекомендуемый тип: Реляционная СУБД 
Реляционные СУБД (PostgreSQL)  обеспечит целостность данных по клиентам и сделкам, а также сложную аналитику для отдела продаж, поддерживают тип данных JSON, что добавляет гибкости для хранения динамических данных с лендингов

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.
Ответ:

Рекомендуемый тип: Документная NoSQL СУБД. 
Документная БД представляет древовидные структуры. Можно хранить целый раздел документации как один документ со вложенными разделами, картинками, файлами.

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.
Ответ:

Рекомендуемый тип: Графовая СУБД

В графовых БД работают быстро даже на больших графах. Запрос выполняется за несколько секунд, Легко перепривязать курьера к другому маршруту или найти ближайшего свободного курьера к точке отправления

### Задание 2

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

описываю БД оператора связи 

1. Пользователь в приложении оператора вводит номер и сумму. Приложение формирует уникальный идентификатор платежа payment_id и перенаправляет пользователя в защищённый платёжный шлюз банка.
2. В БД банка (bank_core_db) выполняется команда BEGIN TRANSACTION. Система отмечает начало атомарной операции списания средств со счета клиента. Создается контекст транзакции и журнал отката.
3. В рамках начатой транзакции в БД банка выполняется запрос для проверки и блокировки банковского счета клиента. Использование FOR UPDATE устанавливает эксклюзивную блокировку на строку с банковским счетом пользователя, предотвращая его параллельное изменение, далее проверяется достаточность средств, и если они есть — выполняется списание суммы со счёта и создаётся запись о транзакции со статусом «зарезервировано». После этого транзакция фиксируется (COMMIT). Средства клиента списаны, платёж зарезервирован. Банк готов сообщить шлюзу об успехе. На этом этапе деньги ещё не у оператора, они «в пути».
4. Платёжный шлюз получает от банка подтверждение успешного списания (SUCCESS). Шлюз выполняет вызов API биллинговой системы оператора, передавая payment_id и сумму. Ключевая задача шлюза гарантировать, что это сообщение будет доставлено хотя бы один раз.
5. Транзакция в БД Оператора задача гарантированно зачислить услугу на номер абонента, избежав двойного зачисления. СУБД получает команду BEGIN. Первым делом начинается проверка идемпотентности: если запись с таким payment_id уже существует — операция уже выполнена, происходит откат и возврат успешного статуса (идемпотентность). Если платеж новый — выполняется проверка номера и блокировка строки абонента в таблице подписчиков. Затем сумма пополнения зачисляется на баланс телефонного номера. После этого фиксируется запись о транзакции пополнения, и вся операция завершается командой COMMIT.
6.  После успешного COMMIT приложение отправляет клиенту  подтверждение об успешном пополнении. Это происходит после фиксации, чтобы гарантировать, что клиент получит информацию только о реально выполненной операции.

### Задание 3

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

1. Гарантированная целостность данных 

SQL: Полная поддержка ACID-транзакций  Это означает, что финансовые операции, переводы, обновления инвентаря выполняются либо полностью, либо не выполняются вовсе, без промежуточных состояний, которые могут нарушить логику данных.

NoSQL: жертвуют полной ACID-поддержкой в угоду доступности и масштабируемости, предлагая модель BASE. Данные между узлами могут временно расходиться.

2. Мощный и стандартизированный язык запросов 

SQL: Единый, богатый и стандартизированный язык. Позволяет с помощью одного запроса выполнять сложные соединения  нескольких таблиц, оконные функции, вложенные подзапросы. Это идеально для отчетности.

NoSQL: Каждый тип NoSQL имеет свой специфический язык или API . Они часто оптимизированы под конкретную модель данных и могут быть неудобны.

3. Жёсткая схема данных

SQL: Схема определяется до записи данных. Это гарантирует, что все данные будут соответствовать заданным бизнес-правилам, предотвращает попадание «мусора» и облегчает понимание структуры любому разработчику.

NoSQL: Часто используется схема при чтении. Данные можно записать в любом формате, но ответственность за их корректность и интерпретацию ложится на приложение.

4. Богатые возможности по обеспечению целостности на уровне БД

SQL: Внешние ключи  автоматически поддерживают ссылочную целостность . Уникальные ограничения, проверки. Это снижает количество ошибок в бизнес-логике приложения.

NoSQL: Как правило, поддержка таких связей и ограничений либо отсутствует, либо реализуется на уровне приложения, что увеличивает сложность кода и риск ошибок.

5. Зрелость экосистемы и универсальность

SQL: Огромное количество инструментов для администрирования и мониторинга. Реляционная модель универсальна и подходит для 80% бизнес-задач.

NoSQL: Экосистемы более молодые и часто заточены под конкретные сценарии. NoSQL требует глубокого понимания конкретной задачи, и миграция между разными NoSQL-системами может быть очень сложной.

### Задание 4

Тип СУБД: колоночная NoSQL так как важна высокая доступность и запись данных в реальном времени с равномерным распределением по узлам.
Модель распределенных вычислений: MPP запрос разбивается на множество независимых подзадач, которые выполняются параллельно на всех узлах кластера над своей порцией данных. Результаты затем агрегируются, при падении одной машины её данные и вычисления перераспределяются между оставшимися.
Для задачи связанной с обработкой огромного объёма данных на кластере из 1000 машин ключевым критерием выбора СУБД становится масштабируемость и эффективность распределённых вычислений. При таких масштабах уже недостаточно просто хранить данные — нужно быстро их обрабатывать, разделяя нагрузку между тысячами узлов.
выбираем NoSQL потому что он идеален для горизонтального масштабирования, просто добавляю новые серверы и нагрузка распределяется между ними.
