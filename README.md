# Домашнее задание к занятию "Базы данных, их типы" - `Вялов владислав`


### Задание 1

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.
Ответ:

Рекомендуемый тип: Реляционная (SQL) СУБД, например Oracle 
Жёсткая схема данных обеспечивает чёткую структуру таблицы проекты, статьи бюджета, план, факт, связаны внешними ключами.
Поддержка ACID гарантирует, что финансовые расчёты не будут нарушены при одновременных операциях.
Удобно строить сложные аналитические отчёты с помощью SQL-запросов и оконных функций.

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.
Ответ:

Для лендингов Рекомендуемый тип: Документная NoSQL СУБД. 
Лендинг может иметь уникальную форму с разными полями . Документная БД позволит хранить данные каждого лида как отдельный документ (JSON) без изменения общей структуры БД.
Ключ-значение БД обеспечит сверхбыстрое сохранение данных от форм, чтобы не потерять ни одного лида при высокой нагрузке.

Для CRM Рекомендуемый тип: Реляционная СУБД 
Реляционные СУБД (PostgreSQL)  обеспечит целостность данных по клиентам и сделкам, а также сложную аналитику для отдела продаж, поддерживают тип данных JSON, что добавляет гибкости для хранения динамических данных с лендингов

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.
Ответ:

Рекомендуемый тип: Документная NoSQL СУБД. 
Документная БД представляет древовидные структуры. Можно хранить целый раздел документации как один документ со вложенными разделами, картинками, файлами.

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.
Ответ:

Рекомендуемый тип: Графовая СУБД

В графовых БД работают быстро даже на больших графах. Запрос выполняется за несколько секунд, Легко перепривязать курьера к другому маршруту или найти ближайшего свободного курьера к точке отправления

### Задание 2

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

1. СУБД получает команду BEGIN TRANSACTION, система отмечает точку начала атомарной операции. Все последующие изменения будут временными и изолированными от других транзакций до явного подтверждения. Создаётся контекст транзакции и журнал отката.
2. В начатой транзакции выполняется запрос к таблице accounts для проверки существования номера и получения текущего баланса.
FOR UPDATE Это важнейшая часть. Запрос не только читает данные, но и устанавливает эксклюзивную блокировку на строку с этим номером телефона. Это предотвращает другие попытки изменения этого баланса параллельно, обеспечивая изоляцию.
3. В таблицу transactions вставляется новая запись о платеже Сначала фиксируется факт попытки операции со статусом pending. Это обеспечивает долговечность на уровне журнала транзакций, даже если система упадёт на следующем шаге. При откате эта запись будет помечена как отменённая или удалена.
4. Выполняется основной запрос на увеличение баланса в таблице accounts. Приложение или СУБД должны проверить, что операция затронула ровно одну строку, что подтверждает правильность account_id. Это часть обеспечения согласованности — состояние счёта меняется только в ответ на валидную операцию.
5. Если все предыдущие шаги выполнены успешно, система получает команду COMMIT. Это точка атомарности. СУБД гарантированно применяет все изменения как единое целое. Блокировки снимаются, изменения записываются из журнала в основные файлы данных и становятся видимыми для других транзакций. Транзакция считается успешно завершённой.
6.  После успешного COMMIT приложение отправляет клиенту  подтверждение об успешном пополнении. Это происходит после фиксации, чтобы гарантировать, что клиент получит информацию только о реально выполненной операции.

### Задание 3

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

1. Гарантированная целостность данных 

SQL: Полная поддержка ACID-транзакций  Это означает, что финансовые операции, переводы, обновления инвентаря выполняются либо полностью, либо не выполняются вовсе, без промежуточных состояний, которые могут нарушить логику данных.

NoSQL: жертвуют полной ACID-поддержкой в угоду доступности и масштабируемости, предлагая модель BASE. Данные между узлами могут временно расходиться.

2. Мощный и стандартизированный язык запросов 

SQL: Единый, богатый и стандартизированный язык. Позволяет с помощью одного запроса выполнять сложные соединения  нескольких таблиц, оконные функции, вложенные подзапросы. Это идеально для отчетности.

NoSQL: Каждый тип NoSQL имеет свой специфический язык или API . Они часто оптимизированы под конкретную модель данных и могут быть неудобны.

3. Жёсткая схема данных

SQL: Схема определяется до записи данных. Это гарантирует, что все данные будут соответствовать заданным бизнес-правилам, предотвращает попадание «мусора» и облегчает понимание структуры любому разработчику.

NoSQL: Часто используется схема при чтении. Данные можно записать в любом формате, но ответственность за их корректность и интерпретацию ложится на приложение.

4. Богатые возможности по обеспечению целостности на уровне БД

SQL: Внешние ключи  автоматически поддерживают ссылочную целостность . Уникальные ограничения, проверки. Это снижает количество ошибок в бизнес-логике приложения.

NoSQL: Как правило, поддержка таких связей и ограничений либо отсутствует, либо реализуется на уровне приложения, что увеличивает сложность кода и риск ошибок.

5. Зрелость экосистемы и универсальность

SQL: Огромное количество инструментов для администрирования и мониторинга. Реляционная модель универсальна и подходит для 80% бизнес-задач.

NoSQL: Экосистемы более молодые и часто заточены под конкретные сценарии. NoSQL требует глубокого понимания конкретной задачи, и миграция между разными NoSQL-системами может быть очень сложной.

### Задание 4

Тип СУБД: колоночная NoSQL так как важна высокая доступность и запись данных в реальном времени с равномерным распределением по узлам.
Модель распределенных вычислений: MPP запрос разбивается на множество независимых подзадач, которые выполняются параллельно на всех узлах кластера над своей порцией данных. Результаты затем агрегируются, при падении одной машины её данные и вычисления перераспределяются между оставшимися.
Для задачи связанной с обработкой огромного объёма данных на кластере из 1000 машин ключевым критерием выбора СУБД становится масштабируемость и эффективность распределённых вычислений. При таких масштабах уже недостаточно просто хранить данные — нужно быстро их обрабатывать, разделяя нагрузку между тысячами узлов.
выбираем NoSQL потому что он идеален для горизонтального масштабирования, просто добавляю новые серверы и нагрузка распределяется между ними.
